<h1 align="center"> Openfort EIP-7702 Smart Accounts </h1>

<p align="center">
  <img src="../docs/Logo_black_primary_no_bg.png" alt="Openfort" style="width: 300px;" />
</p>

> üöß **Work In Progress**
> 
> This repository is under active development.  
> Contracts are **unaudited**, and the codebase may have **breaking changes** without notice.

**All-in-one EIP-7702 powered smart accounts with session key support**

---

## Overview

Smart wallets have made great strides in improving user experience, but still face challenges with key management, account recovery, and cross-application session management. Openfort's EIP-7702 implementations aim to solve these problems with a comprehensive smart account solution that puts users in control.

We believe smart accounts should provide an excellent experience throughout a user's journey:

- **Effortless Onboarding**: Use WebAuthn and Passkeys with no deployment transaction required  
- **Flexible Authentication**: Multiple authentication methods including EOA and WebAuthn/Passkeys  
- **Fine-grained Access Control**: Session keys with customizable permissions and spending limits  
- **Secure Transactions**: Built-in security features including whitelisting, function filtering, and time-based controls  
- **Seamless Experience**: Full compatibility with ERC-4337 account abstraction standard  
- **Gas Sponsorship**: Allow applications to pay for user transactions through session keys  
- **No Vendor Lock-in**: Built on EIP-7702 and ERC-4337 standards for maximum interoperability  
- **üü¢ Live Demo**: [https://7702.openfort.xyz](https://7702.openfort.xyz)

---
<br></br>
## EIP7702 Quickstart
[EIP-7702](https://eips.ethereum.org/EIPS/eip-7702) is a upgrade (Pectra) Ethereum enhancement behaving both as a smart account and as a regular EOA, effectively creating a ‚Äúhybrid‚Äù account enabling embedding EVM code into an Externally Owned Account (EOA). Our [video blog series](https://www.youtube.com/watch?v=94VhTY-1ZsI) has more details for all of you.
Account Abstraction has many features EOA holders can now access due to this. Account Abstraction offers sponsored gas fees as well as multiple operations batched in only one transaction plus session keys in addition to chain abstraction support with similar conveniences.

This guide walks through a basic demo that leverages ERC-4337 along with EIP-7702 so an EOA can directly send a gasless user operation. This [video blog](https://www.youtube.com/watch?v=bE7YUrThS5k) gives info regarding the architecture of openfort 7702 account.

---
<br></br>
## Installation
<!-- Buttons -->
<button id="btn-npm" style="margin-right: 0.5em; padding: 0.4em 0.8em; border:1px solid #ccc; border-radius:4px; background:#f0f0f0; cursor:pointer;">
  npm
</button>
<button id="btn-yarn" style="padding: 0.4em 0.8em; border:1px solid #ccc; border-radius:4px; background:#f0f0f0; cursor:pointer;">
  yarn
</button>

<!-- Command display -->
<pre id="cmd-container" style="margin-top:1em; padding:0.5em; background:#f7f7f7; border-radius:4px; font-family:monospace; user-select: all; cursor: text;">
  <code id="cmd-text">npm install viem @noble/secp256k1 ox permissionless</code>
</pre>

<!-- Copy feedback -->
<span id="copy-feedback" style="position:absolute; opacity:0; transition:opacity 0.3s; font-size:0.9em; color:green; margin-left:0.5em;">Copied!</span>

<script>
  (function() {
    const cmds = {
      npm: 'npm install viem @noble/secp256k1 ox permissionless',
      yarn: 'yarn add viem @noble/secp256k1 ox permissionless'
    };
    const btnNpm = document.getElementById('btn-npm');
    const btnYarn = document.getElementById('btn-yarn');
    const cmdText = document.getElementById('cmd-text');
    const cmdContainer = document.getElementById('cmd-container');
    const feedback = document.getElementById('copy-feedback');

    let current = 'npm'; // default selection

    function setActive(name) {
      current = name;
      // update button styles
      [btnNpm, btnYarn].forEach(btn => {
        btn.style.background = '#f0f0f0';
      });
      if (name === 'npm') {
        btnNpm.style.background = '#e0e0e0';
      } else {
        btnYarn.style.background = '#e0e0e0';
      }
      // update displayed command
      cmdText.textContent = cmds[name];
    }

    function copyCommand() {
      navigator.clipboard.writeText(cmds[current]).then(() => {
        // show feedback next to the pre
        const rect = cmdContainer.getBoundingClientRect();
        feedback.style.position = 'fixed';
        feedback.style.top = (rect.top + 5) + 'px';
        feedback.style.left = (rect.right + 10) + 'px';
        feedback.style.opacity = '1';
        setTimeout(() => feedback.style.opacity = '0', 1000);
      });
    }

    btnNpm.addEventListener('click', () => setActive('npm'));
    btnYarn.addEventListener('click', () => setActive('yarn'));
    cmdContainer.addEventListener('click', copyCommand);
  })();
</script>